(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{201:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var a=n(0),r=n.n(a),c=n(295),o=n(294),l=n(16),u=n.n(l),i=n(4),s=n(15),m=n(37),d=n(92),f=(n(264),n(277),(0===d.a.apps.length?d.a.initializeApp({apiKey:"AIzaSyBXiYlPJNIU0Gge9uy6ursp7uQKPS90vQo",authDomain:"gifted-chat-a5d6d.firebaseapp.com",projectId:"gifted-chat-a5d6d",storageBucket:"gifted-chat-a5d6d.appspot.com",messagingSenderId:"1076931133196",appId:"1:1076931133196:web:6198f6a1875e3236f71329",measurementId:"G-L63YE5HFT6"}):d.a.app()).firestore()),p=d.a.auth(),g=n(1).a.create({container:{flex:1,alignItems:"center",padding:10},button:{width:200,marginTop:10},error:{color:"red"}}),h=function(e){var t=e.navigation,n=Object(a.useState)(""),c=u()(n,2),o=c[0],l=c[1],d=Object(a.useState)(""),f=u()(d,2),h=f[0],E=f[1],b=Object(a.useState)(""),v=u()(b,2),y=v[0],S=v[1];return r.a.createElement(i.a,{style:g.container},r.a.createElement(m.c,{placeholder:"Enter your email",label:"Email",leftIcon:{type:"material",name:"email"},value:o,onChangeText:function(e){return l(e)}}),r.a.createElement(m.c,{placeholder:"Enter your password",label:"Password",leftIcon:{type:"material",name:"lock"},value:h,onChangeText:function(e){return E(e)},secureTextEntry:!0}),r.a.createElement(m.b,{title:"login",style:g.button,onPress:function(){p.signInWithEmailAndPassword(o,h).then((function(){return t.replace("Chat")})).catch((function(e){S(e.message)}))}}),r.a.createElement(m.b,{title:"register",style:g.button,onPress:function(){return t.navigate("Register")}}),r.a.createElement(s.a,{style:g.error},y))},E=function(e){var t=e.navigation,n=Object(a.useState)(""),c=u()(n,2),o=c[0],l=c[1],d=Object(a.useState)(""),f=u()(d,2),h=f[0],E=f[1],b=Object(a.useState)(""),v=u()(b,2),y=v[0],S=v[1],j=Object(a.useState)(""),O=u()(j,2),w=O[0],A=O[1],C=Object(a.useState)(""),P=u()(C,2),x=P[0],I=P[1];Object(a.useEffect)((function(){return p.onAuthStateChanged((function(e){e&&t.replace("Chat")}))}),[]);return r.a.createElement(i.a,{style:g.container},r.a.createElement(m.c,{placeholder:"Enter your name",label:"Name",leftIcon:{type:"material",name:"badge"},value:o,onChangeText:function(e){return l(e)}}),r.a.createElement(m.c,{placeholder:"Enter your email",label:"Email",leftIcon:{type:"material",name:"email"},value:h,onChangeText:function(e){return E(e)}}),r.a.createElement(m.c,{placeholder:"Enter your password",label:"Password",leftIcon:{type:"material",name:"lock"},value:y,onChangeText:function(e){return S(e)},secureTextEntry:!0}),r.a.createElement(m.c,{placeholder:"Enter your image url",label:"Profile Picture",leftIcon:{type:"material",name:"face"},onChangeText:function(e){return A(e)}}),r.a.createElement(m.b,{title:"register",style:g.button,onPress:function(){p.createUserWithEmailAndPassword(h,y).then((function(e){var n=e.user;console.log("signed in"),n.updateProfile({displayName:o,photoURL:w||"https://www.trackergps.com/canvas/images/icons/avatar.jpg"}).catch((function(e){I(e.message)})),t.replace("Chat")})).catch((function(e){I(e.message)}))}}),r.a.createElement(s.a,{style:g.error},x))},b=n(20),v=n(181),y=n(117),S=function(e){var t,n,c,o=e.navigation,l=Object(a.useState)([]),s=u()(l,2),d=s[0],g=s[1],h=function(){p.signOut().then((function(){o.replace("Login")})).catch((function(e){}))};Object(a.useLayoutEffect)((function(){o.setOptions({headerLeft:function(){var e;return r.a.createElement(i.a,{style:{marginLeft:20}},r.a.createElement(m.a,{rounded:!0,source:{uri:null==p||null==(e=p.currentUser)?void 0:e.photoURL}}))},headerRight:function(){return r.a.createElement(b.a,{style:{marginRight:10},onPress:h},r.a.createElement(v.a,{name:"logout",size:24,color:"black"}))}}),console.log(null==p?void 0:p.currentUser)}),[o]);var E=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];g((function(t){return y.a.append(t,e)}));var t=e[0],n=t._id,a=t.createdAt,r=t.text,c=t.user;f.collection("chats").add({_id:n,createdAt:a,text:r,user:c})}),[]);return Object(a.useLayoutEffect)((function(){return f.collection("chats").orderBy("createdAt","desc").onSnapshot((function(e){return g(e.docs.map((function(e){return{_id:e.data()._id,createdAt:e.data().createdAt.toDate(),text:e.data().text,user:e.data().user}})))}))}),[]),r.a.createElement(y.a,{messages:d,showAvatarForEveryMessage:!0,onSend:function(e){return E(e)},user:{_id:null==p||null==(t=p.currentUser)?void 0:t.email,name:null==p||null==(n=p.currentUser)?void 0:n.displayName,avatar:null==p||null==(c=p.currentUser)?void 0:c.photoURL}})};function j(e){var t,n=e.navigation;return r.a.createElement(i.a,{style:g.container},r.a.createElement(s.a,null,"Home Screen"),r.a.createElement(s.a,null,"All chat rooms will be listed here"),r.a.createElement(s.a,null,null==p||null==(t=p.currentUser)?void 0:t.displayName),r.a.createElement(m.b,{title:"Logout",style:g.button,onPress:function(){p.signOut().then((function(){n.replace("Login")})).catch((function(e){}))}}),r.a.createElement(m.b,{title:"Add Room",style:g.button,onPress:function(){return n.navigate("AddRoom")}}))}function O(e){var t=e.navigation;return r.a.createElement(i.a,{style:{flex:1,justifyContent:"center",alignItems:"center"}},r.a.createElement(s.a,null,"Create a new chat room"),r.a.createElement(m.b,{title:"Close Modal",style:g.button,onPress:function(){return t.goBack()}}))}var w=Object(c.a)(),A=Object(c.a)();function C(){return r.a.createElement(w.Navigator,null,r.a.createElement(w.Screen,{name:"Login",component:h}),r.a.createElement(w.Screen,{name:"Register",component:E}),r.a.createElement(w.Screen,{name:"Chat",component:S}),r.a.createElement(w.Screen,{name:"Home",component:j}))}function P(){return r.a.createElement(o.a,null,r.a.createElement(A.Navigator,{mode:"modal",headerMode:"none"},r.a.createElement(A.Screen,{name:"ChatApp",component:C}),r.a.createElement(A.Screen,{name:"AddRoom",component:O})))}},206:function(e,t,n){e.exports=n(275)}},[[206,1,2]]]);
//# sourceMappingURL=app.a2bb50fe.chunk.js.map